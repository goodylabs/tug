# TUG (PL)

![tug](https://raw.githubusercontent.com/goodylabs/tug/refs/heads/main/assets/images/tug-cli-logo-256x256.png)

TUG to narzędzie cli które pomaga podglądać rzeczy co się dzieje na stagingu/produkcji etc. dla danego repo, kiedy nie chcesz się bawić w ręczne wklepywanie komend.

## Instalacja

1. Dodaj poniższą ścieżkę do swojego PATH. Aby to zrobić na stałe dodaj poniższą linię do swojego pliku `~/.bashrc` lub `~/.zshrc` (w zależności od używanej powłoki):

```bash
export PATH="$HOME/.tug/bin:$PATH"
```

2. Zrestartuj terminal lub załaduj zmiany w bieżącej sesji:

```bash
source ~/.zshrc  # jeśli używasz zsh
source ~/.bashrc # jeśli używasz bash
```

3. Uruchom poniższą komendę, aby pobrać i zainstalować najnowszą binarkę TUG:

```bash
curl -s https://raw.githubusercontent.com/goodylabs/tug/refs/heads/main/scripts/download_script.sh | bash -s
```

4. Skonfiguruj TUG:

```bash
tug initialize
```

## Aktualizacja

Aby zaktualizować TUG do najnowszej wersji, wystarczy ponownie uruchomić skrypt instalacyjny:

```bash
curl -s https://raw.githubusercontent.com/goodylabs/tug/refs/heads/main/scripts/download_script.sh | bash -s
```

## Podstawowe komendy

```bash
tug --version
tug --help
tug completion # komenda wygenerowana przez framework - na razie jeszcze nie rozkminiłem jak dokładnie działa.
```

## PM2

Ułatwia uruchamianie komend na zewnętrznych serwerach, jeżeli projekt korzysta z pm2.

Co to robi tak po kolei?

1. Zaczytuje konfiguracje z `ecosystem.config.js` w katalogu głównym repozytorium w którym się **TERAZ ZNAJDUJESZ GDY KORZYSTASZ Z TUG**

> czyli jak chcesz podejrzeć co się dzieje na środowiskach `<project>/<repo>` to musisz wejść na lokalu do repozytorium `<project>/<repo>` i tam uruchomić `tug pm2`.

2. Jak już zaczyta konfigurację to zadaje ci pytania o to co ciebie interesuje, czyli:

   a. jakie środowisko (staging, production)?
   b. jeśli jest tam więcej hostów to który host?
   c. który proces na serwerze?
   d. co chcesz wykonać np. zobaczyć logi, zrestartować proces?

3. Po tym wszystkim generuje odpowiednią komendę i ją wykonuje na zdalnym serwerze.

```bash
# Podstawowe użycie
tug pm2

# Jak wiesz dokładnie jakie środowisko to możesz od razu podać
tug pm2 staging
tug pm2 staging_RO
tug pm2 production
```

# TUG (EN)

![tug](https://raw.githubusercontent.com/goodylabs/tug/refs/heads/main/assets/images/tug-cli-logo-256x256.png)

TUG is a CLI tool that helps you peek into what’s happening on staging/production/etc. for a given repo — when you don’t want to manually type out commands.

## Installation

1. Add the following path to your `PATH`. To do this permanently, add the line below to your `~/.bashrc` or `~/.zshrc` file (depending on your shell):

```bash
export PATH="$HOME/.tug/bin:$PATH"
```

2. Restart your terminal or load the changes in your current session:

```bash
source ~/.zshrc  # if you're using zsh
source ~/.bashrc # if you're using bash
```

3. Run the following command to download and install the latest TUG binary:

```bash
curl -s https://raw.githubusercontent.com/goodylabs/tug/refs/heads/main/scripts/download_script.sh | bash -s
```

4. TUG uses `~/.ssh/id_ed25519` for SSH connections, or `~/.ssh/id_rsa` if the former isn’t found. Make sure your key is available at one of these locations:

```bash
ls ~/.ssh/id_ed25519
ls ~/.ssh/id_rsa
```

## Update

To update TUG to the latest version, simply re-run the installation script:

```bash
curl -s https://raw.githubusercontent.com/goodylabs/tug/refs/heads/main/scripts/download_script.sh | bash -s
```

## Basic commands

```bash
tug --version
tug --help
tug completion # command generated by the framework – not fully figured out how it works yet
```

## PM2

This makes it easier to run commands on remote servers when the project uses PM2.

What does it do step-by-step?

1. It reads the configuration from `ecosystem.config.js` in the root directory of the repository **you are currently in when using TUG**.

> So if you want to check what's happening in the `<project>/<repo>` environments, you need to `cd` into the local `<project>/<repo>` repository and run `tug pm2` there.

2. After reading the config, it asks you questions such as:

   a. Which environment (staging, production)?
   b. If there are multiple hosts — which host?
   c. Which process on the server?
   d. What do you want to do? (e.g., view logs, restart the process)

3. After that, it generates the appropriate command and runs it on the remote server.

```bash
# Basic usage
tug pm2

# If you already know the environment, you can specify it right away
tug pm2 staging
tug pm2 staging_RO
tug pm2 production
```
